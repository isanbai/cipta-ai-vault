name: Merge Weekly Roadmap

on:
  push:
    paths:
      - 'Roadmap/**.md'
      - '.github/workflows/merge-roadmap.yml'

jobs:
  merge:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v2

      - name: Merge Weekly Files into Final_Roadmap.md
        run: |
          echo "# ğŸ§­ Final Roadmap â€“ Cipta AI Vault" > Final_Roadmap.md
          echo "" >> Final_Roadmap.md
          
          for f in $(ls Roadmap/Week* | sort); do
            echo "## ğŸš€ $(basename "$f" .md)" >> Final_Roadmap.md
            echo "" >> Final_Roadmap.md
            cat "$f" >> Final_Roadmap.md
            echo -e "\n---\n" >> Final_Roadmap.md
          done

      - name: Commit & Push
        run: |
          git config user.name "vault-bot"
          git config user.email "vault-bot@example.com"
          git add Final_Roadmap.md
          git commit -m "ğŸ” Update Final_Roadmap.md"
          git push
        continue-on-error: true  # supaya tidak error kalau tidak ada perubahan
